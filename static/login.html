<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="style.css">
</head>
<div class="topnav">
    <a href="index.html">Home Page</a>
    <a class="active" href="login.html">Login Page</a>
    <a href="create.html">Create Inventory</a>
    <a href="delete.html">Delete Item from Inventory</a>
    <a href="details.html">Inventory Page</a>
	<a href="register.html">Make an Account</a>
  </div>
<body>
    <main>
        <div class="container">
            <form class="form-control" id="login">
                <h1 class="formTitle">Login</h1>
                <div class="formMessage formMessageError"></div>
                <div class="formInputGroup">
                    <input type="text" class="formInput" autofocus placeholder="Username" id="username">
                    <div class="formInputErrorMessage"></div>
                </div>
                <div class="formInputGroup">
                    <input type="password" class="formInput" autofocus placeholder="password" id ="password">
                    <div class="formInputErrorMessage"></div>
                </div>
                <button class="button" style="background-color:green; border:green;" type="submit" value="Submit Form">login</button>
                    <p class="formText">
                        <a href= "register.html" id="" >Create Account</a>
                    </p>
                    <p class="formText">
                        <a href= "index.html" id="" >Return Home</a>
                    </p>
            </form>
            <script>
                const form = document.getElementById('login')
                form.addEventListener('submit', login)
                async function login(event){
                    event.preventDefault()
                    const username = document.getElementById("username").value;
                    const password = document.getElementById("password").value;
                    const body = JSON.stringify({username, password})
                    const headers = {'content-Type': 'application/json'}
                    const result = await fetch('/login', {method: 'POST', body, headers}).then((response) => response.json())
                    if (result.status == 'Successful'){
                        console.log('Token Recieved: ', result.data)
                        alert("Successful")
                    } else{
                        alert(result.error)
                    }
            }

            </script>
    </main>
</body>